<app-navbar></app-navbar>
<div class="loader-container" *ngIf="!cargado">
    <img src="../../assets/load.gif" *ngIf="!cargado" id="load">
</div>
<div class="paca-container" *ngFor="let paca of listaPacas; let i = index">
    <div class="paca-header">
        <h3>Paca ID: {{ paca.id }}</h3>
    </div>
    <div class="paca-details">
        <p><strong>Tipo:</strong> {{ paca.tipo }}</p>
        <p><strong>Estado:</strong> {{ paca.estado }}</p>
        <p><strong>Sede:</strong> {{ paca.sede }}</p>
        <p><strong>Ubicacion:</strong> {{ paca.ubicacion }}</p>
    </div>
    
    <div class="paca-section">
        <h4 (click)="toggleSection(i, 'mantenimiento')">
        Mantenimientos: 
        <span class="arrow">{{ showMantenimiento[i] ? '▼' : '▶' }}</span>
        </h4>
      <ul *ngIf="showMantenimiento[i]">
        <li *ngFor="let m of paca.mantenimiento">
            <p><strong>Fecha: </strong>{{ m.fecha }}</p>
            <p><strong>Responsable: </strong>{{ m.empleadoId }}</p>
            <p><strong>Concepto: </strong>{{ m.concepto }}</p>
            <div class="button-container">
                <button class="btn-editar">Editar</button>
                <button class="btn-eliminar">Eliminar</button>
            </div>
        </li>
        </ul>
    </div>
    
    <div class="paca-section">
        <h4 (click)="toggleSection(i, 'historial')">
        Historial de campo: 
        <span class="arrow">{{ showHistorial[i] ? '▼' : '▶' }}</span>
        </h4>
      <ul *ngIf="showHistorial[i]">
        <button class="add-day-btn" (click)="addCampo(paca.id,paca.tipo)">Añadir dia</button>
        <li *ngFor="let h of paca.historialCampo">
            <p><strong>Fecha: </strong>{{ h.fecha }}</p>
            <p><strong>Sede: </strong>{{ h.sede }}</p>
            <p><strong>Ubicacion: </strong>{{ h.ubicacion }}</p>
            <p><strong>Distancia: </strong>{{ h.distancia }}</p>
            <div class="button-container">
                <button class="btn-editar">Editar</button>
                <button class="btn-eliminar">Eliminar</button>
            </div>
        </li>
      </ul>
      
    </div>
</div>